<svg width="900" height="500" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <rect x="0" y="0" width="900" height="50" fill="#673AB7"/>
  <text x="450" y="33" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="white" text-anchor="middle">Speculative Decoding: 2-3x Faster Generation</text>
  
  <!-- Problem -->
  <rect x="30" y="70" width="400" height="160" rx="10" fill="#FFEBEE" stroke="#F44336" stroke-width="2"/>
  <text x="230" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#C62828" text-anchor="middle">Standard Decoding (Slow)</text>
  
  <text x="50" y="130" font-family="Arial, sans-serif" font-size="11" fill="#333">Large model generates ONE token at a time:</text>
  <text x="50" y="160" font-family="Courier New, monospace" font-size="10" fill="#333">t=1: [The]      → forward pass (slow)</text>
  <text x="50" y="180" font-family="Courier New, monospace" font-size="10" fill="#333">t=2: [cat]      → forward pass (slow)</text>
  <text x="50" y="200" font-family="Courier New, monospace" font-size="10" fill="#333">t=3: [sat]      → forward pass (slow)</text>
  <text x="50" y="220" font-family="Arial, sans-serif" font-size="10" fill="#C62828">n tokens = n slow forward passes!</text>
  
  <!-- Solution -->
  <rect x="470" y="70" width="400" height="160" rx="10" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="670" y="100" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#2E7D32" text-anchor="middle">Speculative Decoding (Fast)</text>
  
  <text x="490" y="130" font-family="Arial, sans-serif" font-size="11" fill="#333">Small model drafts, large model verifies:</text>
  <text x="490" y="160" font-family="Courier New, monospace" font-size="10" fill="#333">Draft:  [The,cat,sat,on] (fast)</text>
  <text x="490" y="180" font-family="Courier New, monospace" font-size="10" fill="#333">Verify: [The,cat,sat] ✓ on→the (1 pass!)</text>
  <text x="490" y="200" font-family="Arial, sans-serif" font-size="10" fill="#666">Accept 3 tokens + correct 1 in SINGLE forward!</text>
  <text x="490" y="220" font-family="Arial, sans-serif" font-size="10" fill="#2E7D32">2-3x fewer forward passes!</text>
  
  <!-- Workflow diagram -->
  <rect x="30" y="250" width="840" height="230" rx="10" fill="#FAFAFA" stroke="#E0E0E0" stroke-width="2"/>
  <text x="450" y="280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">Speculative Decoding Workflow</text>
  
  <!-- Step 1: Draft model -->
  <rect x="60" y="310" width="200" height="80" rx="8" fill="#E3F2FD" stroke="#2196F3" stroke-width="2"/>
  <text x="160" y="340" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1565C0" text-anchor="middle">1. Draft Model</text>
  <text x="160" y="360" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Small, fast model (e.g., 1B)</text>
  <text x="160" y="380" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">Generate k=4 draft tokens</text>
  
  <!-- Arrow -->
  <line x1="265" y1="350" x2="305" y2="350" stroke="#666" stroke-width="2"/>
  <polygon points="300,345 310,350 300,355" fill="#666"/>
  
  <!-- Draft tokens -->
  <rect x="310" y="320" width="180" height="60" rx="5" fill="#BBDEFB"/>
  <text x="400" y="345" font-family="Arial, sans-serif" font-size="11" fill="#1565C0" text-anchor="middle">Draft: [The, cat, sat, on]</text>
  <text x="400" y="365" font-family="Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">(generated fast in parallel)</text>
  
  <!-- Arrow -->
  <line x1="495" y1="350" x2="535" y2="350" stroke="#666" stroke-width="2"/>
  <polygon points="530,345 540,350 530,355" fill="#666"/>
  
  <!-- Step 2: Target model verify -->
  <rect x="540" y="310" width="200" height="80" rx="8" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="640" y="340" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#2E7D32" text-anchor="middle">2. Target Model</text>
  <text x="640" y="360" font-family="Arial, sans-serif" font-size="10" fill="#333" text-anchor="middle">Large model (e.g., 70B)</text>
  <text x="640" y="380" font-family="Arial, sans-serif" font-size="10" fill="#666" text-anchor="middle">Verify ALL drafts in 1 pass</text>
  
  <!-- Arrow -->
  <line x1="745" y1="350" x2="785" y2="350" stroke="#666" stroke-width="2"/>
  <polygon points="780,345 790,350 780,355" fill="#666"/>
  
  <!-- Result -->
  <rect x="790" y="320" width="60" height="60" rx="5" fill="#C8E6C9" stroke="#4CAF50" stroke-width="2"/>
  <text x="820" y="355" font-family="Arial, sans-serif" font-size="10" fill="#2E7D32" text-anchor="middle">3-4</text>
  <text x="820" y="370" font-family="Arial, sans-serif" font-size="9" fill="#666" text-anchor="middle">tokens!</text>
  
  <!-- Verification example -->
  <rect x="60" y="410" width="400" height="55" rx="5" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
  <text x="260" y="435" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#E65100" text-anchor="middle">Verification Example</text>
  <text x="80" y="455" font-family="Courier New, monospace" font-size="10" fill="#333">Draft: [The, cat, sat, on] | Target: [The, cat, sat, the]</text>
  
  <!-- Accept/reject -->
  <rect x="480" y="410" width="380" height="55" rx="5" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="670" y="435" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#2E7D32" text-anchor="middle">Result</text>
  <text x="500" y="455" font-family="Arial, sans-serif" font-size="10" fill="#333">Accept: [The ✓, cat ✓, sat ✓] + Correct: [the] = 4 tokens/pass!</text>
</svg>
