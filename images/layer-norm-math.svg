<svg width="900" height="500" viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <rect x="0" y="0" width="900" height="50" fill="#9C27B0"/>
  <text x="450" y="33" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="white" text-anchor="middle">Layer Normalization: Math &amp; Comparison</text>
  
  <!-- Layer Norm Section -->
  <rect x="30" y="70" width="400" height="200" rx="10" fill="#F3E5F5" stroke="#9C27B0" stroke-width="2"/>
  <text x="230" y="100" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7B1FA2" text-anchor="middle">LayerNorm (2017-2020)</text>
  
  <text x="50" y="135" font-family="Courier New, monospace" font-size="12" fill="#333">LayerNorm(x) = gamma * (x - mu) / sqrt(sigma^2 + eps) + beta</text>
  
  <text x="50" y="170" font-family="Arial, sans-serif" font-size="11" fill="#666">mu = mean(x) across features</text>
  <text x="50" y="190" font-family="Arial, sans-serif" font-size="11" fill="#666">sigma^2 = variance(x) across features</text>
  <text x="50" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">gamma, beta = learnable parameters</text>
  <text x="50" y="230" font-family="Arial, sans-serif" font-size="11" fill="#666">eps = 1e-5 (numerical stability)</text>
  
  <text x="230" y="260" font-family="Arial, sans-serif" font-size="10" fill="#9C27B0" text-anchor="middle">Complexity: O(d) - compute mean AND variance</text>
  
  <!-- RMS Norm Section -->
  <rect x="470" y="70" width="400" height="200" rx="10" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="670" y="100" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2E7D32" text-anchor="middle">RMSNorm (2023+)</text>
  
  <text x="490" y="135" font-family="Courier New, monospace" font-size="12" fill="#333">RMSNorm(x) = x / RMS(x) * gamma</text>
  
  <text x="490" y="170" font-family="Arial, sans-serif" font-size="11" fill="#666">RMS(x) = sqrt(mean(x^2))</text>
  <text x="490" y="190" font-family="Arial, sans-serif" font-size="11" fill="#666">No mean subtraction needed!</text>
  <text x="490" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">gamma only (no beta)</text>
  <text x="490" y="230" font-family="Arial, sans-serif" font-size="11" fill="#666">Simpler, faster, similar quality</text>
  
  <text x="670" y="260" font-family="Arial, sans-serif" font-size="10" fill="#4CAF50" text-anchor="middle">Complexity: O(d) - BUT faster! (no mean)</text>
  
  <!-- Pre-Norm vs Post-Norm -->
  <rect x="30" y="290" width="840" height="190" rx="10" fill="#FAFAFA" stroke="#E0E0E0" stroke-width="2"/>
  <text x="450" y="320" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#333" text-anchor="middle">Pre-Norm vs Post-Norm</text>
  
  <!-- Post-Norm (2017) -->
  <rect x="60" y="340" width="350" height="120" rx="8" fill="#FFEBEE" stroke="#F44336" stroke-width="2"/>
  <text x="235" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#C62828" text-anchor="middle">Post-Norm (Original 2017)</text>
  
  <text x="80" y="395" font-family="Courier New, monospace" font-size="11" fill="#333">output = LayerNorm(x + Sublayer(x))</text>
  <text x="80" y="420" font-family="Arial, sans-serif" font-size="10" fill="#666">Problem: Gradients can explode/vanish</text>
  <text x="80" y="440" font-family="Arial, sans-serif" font-size="10" fill="#666">Need careful learning rate warmup</text>
  
  <!-- Pre-Norm (Modern) -->
  <rect x="490" y="340" width="350" height="120" rx="8" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="665" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#2E7D32" text-anchor="middle">Pre-Norm (Modern)</text>
  
  <text x="510" y="395" font-family="Courier New, monospace" font-size="11" fill="#333">output = x + Sublayer(LayerNorm(x))</text>
  <text x="510" y="420" font-family="Arial, sans-serif" font-size="10" fill="#666">Better gradient flow!</text>
  <text x="510" y="440" font-family="Arial, sans-serif" font-size="10" fill="#666">More stable training, easier to scale</text>
</svg>
